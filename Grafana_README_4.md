

## Grafana Dashboard Panels Overview

## App Dashboard

This table provides an overview of the key panels and their corresponding queries used in the Grafana dashboard.

| **Panel Name**             | **Metric / Query**                                                                                                                                     | **Description**                                          |
|----------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------|
| **Total HTTP Requests**     | `rate(nginx_http_requests_total{instance=~"$host"}[$interval])`                                                                                        | Shows the rate of HTTP requests processed by Nginx.      |
| **Active Connections**      | `nginx_connections_active{instance=~"$host"}`                                                                                                          | Displays the current number of active connections to Nginx. |
| **CMS Availability**        | `probe_success{instance="http://172.19.0.10:80", job="blackbox"}`                                                                                      | Indicates whether the CMS is up (`1`) or down (`0`).     |
| **CMS Response Time**       | `probe_duration_seconds{instance="http://172.19.0.10:80", job="blackbox"}`                                                                             | Tracks the time taken for the CMS to respond.            |
| **MySQL Queries Per Second**| `rate(mysql_global_status_queries{instance="$host"}[5m])`                                                                                              | Shows the rate of queries processed by MySQL.            |
| **CPU Usage**               | `sum(rate(node_cpu_seconds_total{instance=~"$host", mode!="idle"}[$interval])) by (mode) / sum(rate(node_cpu_seconds_total{instance=~"$host"}[$interval])) * 100` | Displays CPU utilization as a percentage.               |
| **Memory Usage**            | `100 - ((node_memory_MemAvailable_bytes{instance=~"$host"} * 100) / node_memory_MemTotal_bytes{instance=~"$host"})`                                    | Shows the percentage of used memory on the system.       |

### Notes:
- **$host:** Refers to the selected host(s) from the dashboard dropdown.
- **$interval:** Refers to the selected time interval (e.g., 1m, 5m).
- The queries use `=~"$host"` to allow for multi-host selection in the dropdown.



## System Overview Dashboard
| **Panel Name**            | **Metric(s) Used**                                                                                                      | **Prometheus Query**                                                                                                                                          | **Visualization Type** | **Description**                                                                                   |
|---------------------------|------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------------|---------------------------------------------------------------------------------------------------|
| **CPU Usage**             | `node_cpu_seconds_total`                                                                                                | `sum(rate(node_cpu_seconds_total{instance="$host", mode!="idle"}[5m])) / sum(rate(node_cpu_seconds_total{instance="$host"}[5m])) * 100`                      | Time Series, Gauge     | Displays the percentage of CPU utilization across all cores, excluding idle time.                |
| **Memory Usage**          | `node_memory_MemTotal_bytes`, `node_memory_MemFree_bytes`, `node_memory_Buffers_bytes`, `node_memory_Cached_bytes`       | `(node_memory_MemTotal_bytes{instance="$host"} - node_memory_MemFree_bytes{instance="$host"} - node_memory_Buffers_bytes{instance="$host"} - node_memory_Cached_bytes{instance="$host"}) / node_memory_MemTotal_bytes{instance="$host"} * 100` | Gauge, Time Series     | Shows the percentage of used memory by subtracting free, buffered, and cached memory from total. |
| **Swap Usage**            | `node_memory_SwapTotal_bytes`, `node_memory_SwapFree_bytes`                                                             | `node_memory_SwapTotal_bytes{instance="$host"} - node_memory_SwapFree_bytes{instance="$host"}`                                                                | Gauge, Time Series     | Displays the amount of used swap space by subtracting free swap from total swap.                  |
| **Disk Space Usage**      | `node_filesystem_size_bytes`, `node_filesystem_free_bytes`                                                              | `1 - (node_filesystem_free_bytes{instance="$host", mountpoint="$mountpoint"} / node_filesystem_size_bytes{instance="$host", mountpoint="$mountpoint"})`      | Gauge, Time Series     | Monitors disk usage as a percentage of total space on each mountpoint.                            |
| **Network Traffic**       | `node_network_receive_bytes_total`, `node_network_transmit_bytes_total`                                                 | `sum(rate(node_network_receive_bytes_total{instance="$host", device!="lo"}[5m]))`, `sum(rate(node_network_transmit_bytes_total{instance="$host", device!="lo"}[5m]))` | Time Series            | Tracks incoming and outgoing network traffic across all interfaces.                              |
| **File Descriptors**      | `node_filefd_maximum`, `node_filefd_allocated`                                                                          | `node_filefd_allocated{instance="$host"}`, `node_filefd_maximum{instance="$host"}`                                                                            | Gauge, Time Series     | Monitors the number of allocated file descriptors against the maximum allowed.                    |
| **I/O Activity**          | `node_vmstat_pgpgin`, `node_vmstat_pgpgout`                                                                             | `rate(node_vmstat_pgpgin{instance="$host"}[5m]) * 4096`, `rate(node_vmstat_pgpgout{instance="$host"}[5m]) * 4096`                                             | Time Series            | Tracks the rate of pages swapped in and out of memory in bytes per second.                        |
| **Swap Activity**         | `node_vmstat_pswpin`, `node_vmstat_pswpout`                                                                             | `rate(node_vmstat_pswpin{instance="$host"}[5m]) * 4096`, `rate(node_vmstat_pswpout{instance="$host"}[5m]) * 4096`                                             | Time Series            | Monitors the rate of swap in and swap out activity in bytes per second.                           |
| **Running Processes**     | `node_procs_running`, `node_procs_blocked`                                                                              | `node_procs_running{instance="$host"}`, `node_procs_blocked{instance="$host"}`                                                                                | Stat, Time Series      | Displays the number of running and blocked processes.                                             |
| **Context Switches**      | `node_context_switches_total`                                                                                           | `rate(node_context_switches_total{instance="$host"}[5m])`, `irate(node_context_switches_total{instance="$host"}[5m])`                                        | Time Series            | Monitors the rate of context switches per second.                                                 |
| **Interrupts**            | `node_intr_total`                                                                                                       | `rate(node_intr_total{instance="$host"}[5m])`, `irate(node_intr_total{instance="$host"}[5m])`                                                                | Time Series            | Tracks the rate of hardware interrupts per second.                                                |

